# 🧪 測試指南

## 本地測試步驟

### 1️⃣ 啟動服務

**Terminal 1: 啟動 Server**
```bash
cd server
npm run dev
```
✅ 看到 `🚀 Server 運行於 http://localhost:3000` 表示成功

**Terminal 2: 啟動 Client**
```bash
npm run dev
```
✅ 看到 `Local: http://localhost:5173/` 表示成功

---

### 2️⃣ 測試流程

#### **測試 A：單機測試（模擬房主 + 訪客）**

1. **開啟瀏覽器 1（模擬房主）**
   - 訪問 http://localhost:5173
   - 選擇「執黑」或「執白」
   - 點擊「創建遊戲房間」
   - 複製產生的分享連結（例如：`http://localhost:5173/#room=A3F9K2`）

2. **開啟瀏覽器 2（模擬訪客，可用無痕模式）**
   - 貼上剛才複製的連結
   - 應該會自動加入房間並顯示「已建立連線」

3. **開始對弈**
   - 兩個視窗可以輪流落子
   - 檢查是否同步更新
   - 測試「重新開始」功能

---

#### **測試 B：跨裝置測試（手機 + 電腦）**

1. **查詢電腦 IP**
```bash
ipconfig  # Windows
```
找到 `IPv4 地址`，例如 `192.168.1.100`

2. **修改 Client 端環境變數（僅測試用）**
在 `.env.local` 中暫時改為：
```env
VITE_SOCKET_URL=http://192.168.1.100:3000
```
重啟 Client

3. **電腦端創建房間**
   - 訪問 http://192.168.1.100:5173
   - 創建房間並複製連結

4. **手機端加入**
   - 用手機瀏覽器開啟分享連結
   - 應該可以正常對戰

---

### 3️⃣ 檢查事項

✅ **創建房間**
- 能否成功產生房間 ID
- URL Hash 是否正確
- 分享連結是否可複製

✅ **加入房間**
- 訪客能否成功加入
- 雙方是否都顯示「已建立連線」

✅ **遊戲進行**
- 落子是否即時同步
- 輪到對方時是否無法落子
- 勝負判定是否正確

✅ **斷線重連**
- 關閉 Server，檢查 UI 是否顯示重連提示
- 重啟 Server，檢查是否自動恢復

✅ **錯誤處理**
- 加入不存在的房間是否顯示錯誤
- 房間已滿時是否拒絕加入

---

### 4️⃣ 監控 WebSocket 通訊

**方法 1：瀏覽器 DevTools**
1. 按 F12 開啟開發者工具
2. 切換到「Network」分頁
3. 篩選「WS」（WebSocket）
4. 可以看到所有 Socket.IO 事件

**方法 2：Server 端 Console**
Server 會輸出所有關鍵事件：
```
✅ 房間已創建: A3F9K2
✅ 玩家加入房間: A3F9K2
🎯 落子: 房間 A3F9K2, 玩家 black, 位置 (7, 7)
```

---

### 5️⃣ 常見問題

**Q: Client 無法連線到 Server？**
- 檢查 `.env.local` 中的 `VITE_SOCKET_URL` 是否正確
- 確認 Server 正在運行（應該看到 `🚀 Server 運行於...`）
- 檢查防火牆是否阻擋 3000 端口

**Q: 訪客加入後沒反應？**
- 檢查 Server Console 是否有錯誤訊息
- 確認房間 ID 是否正確（區分大小寫）

**Q: 落子不同步？**
- 檢查 Browser Console 是否有錯誤
- 重新整理頁面並重試

---

## 性能測試（可選）

### 壓力測試
使用多個瀏覽器分頁同時創建房間，檢查 Server 是否穩定：

```bash
# 檢查 Server 健康狀態
curl http://localhost:3000/health
```

應該返回：
```json
{
  "status": "ok",
  "rooms": 5,
  "timestamp": "2025-12-31T13:00:00.000Z"
}
```

---

## 測試完成後

✅ 確認所有核心功能正常
✅ 檢查 UI 是否美觀流暢
✅ 準備部署到生產環境

---

**祝測試順利！🚀**
