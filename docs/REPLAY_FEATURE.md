# 回放功能使用說明

## 功能概述

終局後,玩家可以使用回放功能重新觀看整場對局的過程,幫助覆盤和學習。

## 如何使用

### 1. 開始回放
- 當遊戲結束後(有勝負或和局),在右側資訊面板會出現「**回放對局**」按鈕
- 點擊該按鈕即可進入回放模式

### 2. 回放控制

回放模式下,您可以使用以下控制按鈕:

| 按鈕 | 功能 | 說明 |
|------|------|------|
| ⏮️ | 重新開始 | 回到第一步 |
| ⏪ | 上一步 | 查看前一步棋 |
| ▶️/⏸️ | 播放/暫停 | 自動播放對局(每秒一步) |
| ⏩ | 下一步 | 查看下一步棋 |
| ⏭️ | 快進到最後 | 跳到最後一步 |
| ❌ | 退出回放 | 返回遊戲結束畫面 |

### 3. 進度顯示
- 頂部會顯示當前步數和總步數
- 進度條會即時反映當前回放進度

### 4. 自動播放
- 點擊播放按鈕後,系統會自動按順序播放每一步
- 播放速度為每秒一步
- 到達最後一步時會自動停止
- 隨時可以點擊暫停按鈕停止自動播放

## 技術實現

### 核心功能
1. **歷史記錄追蹤** - 每一步棋都會記錄在 `room.history` 中
2. **棋盤重建** - 根據回放步驟動態重建棋盤狀態
3. **狀態管理** - 使用 React state 管理回放進度和播放狀態
4. **自動播放** - 使用 `setInterval` 實現自動播放效果

### 組件結構
- `ReplayControls.tsx` - 回放控制面板組件
- `App.tsx` - 主應用,包含回放邏輯
- `GameInfo.tsx` - 遊戲資訊面板,包含回放按鈕

## 注意事項

1. **僅限終局後使用** - 回放功能只在遊戲結束後可用
2. **本地回放** - 目前回放功能僅在當前對局結束後立即可用,刷新頁面後無法回放
3. **不影響遊戲狀態** - 回放模式下無法下棋,退出回放後會回到遊戲結束狀態

## 未來改進方向

1. **對局保存** - 將對局記錄保存到伺服器或 localStorage
2. **對局列表** - 提供歷史對局列表,可以隨時查看過往對局
3. **分享回放** - 生成回放連結,分享給其他人觀看
4. **速度調整** - 允許用戶調整自動播放速度
5. **註解功能** - 允許在回放時添加註解和評論
